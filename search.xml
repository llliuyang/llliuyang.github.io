<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>$_FILES(二)文件的上传</title>
      <link href="/php-xue-xi/files-er-wen-jian-de-shang-chuan/"/>
      <url>/php-xue-xi/files-er-wen-jian-de-shang-chuan/</url>
      
        <content type="html"><![CDATA[<blockquote><p>在上一节中学习了<code>$_FILES</code>的基本使用，本节将继续学习它的进阶用法：文件的上传与 校验</p></blockquote><h2 id="1、创建上传表单"><a href="#1、创建上传表单" class="headerlink" title="1、创建上传表单"></a>1、创建上传表单</h2><pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file.php<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>提交<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>说明：</p><ul><li><code>form</code>标签的 <code>enctype</code>属性规定了在提交表单时要使用哪种内容类型。在表单需要二进制数据时，比如文件内容，请使用 <code>multipart/form-data</code>。</li><li><code>input</code> 标签的 <code>type="file"</code>属性规定了应该把输入作为文件来处理。举例来说，当在浏览器中预览时，会看到输入框旁边有一个浏览按钮。</li></ul></blockquote><h2 id="2、创建上传脚本"><a href="#2、创建上传脚本" class="headerlink" title="2、创建上传脚本"></a>2、创建上传脚本</h2><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token string">"错误："</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">"&lt;br>"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token string">"上传文件名: "</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">"&lt;br>"</span><span class="token punctuation">;</span>    <span class="token keyword">echo</span> <span class="token string">"文件类型: "</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">"&lt;br>"</span><span class="token punctuation">;</span>    <span class="token keyword">echo</span> <span class="token string">"文件大小: "</span> <span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"size"</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token string">" kB&lt;br>"</span><span class="token punctuation">;</span>    <span class="token keyword">echo</span> <span class="token string">"文件临时存储的位置: "</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"tmp_name"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token delimiter">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>说明：以上语法第一个参数是表单中input的<code>name</code>，第二个参数为文件上传属性，具体参数见下表</p></blockquote><p><strong>第二参数详解</strong></p><table><thead><tr><th>参数</th><th>释义</th></tr></thead><tbody><tr><td>name</td><td>上传文件的名称</td></tr><tr><td>type</td><td>上传文件的类型</td></tr><tr><td>size</td><td>上传文件的大小，以字节（B）计算</td></tr><tr><td>tmp_name</td><td>文件被上传后在服务端储存的临时文件名，一般是系统默认</td></tr><tr><td>error</td><td>该文件上传相关的错误代码。<br>PHP 4.2.0 版本中增加，PHP4.3之后变成常量</td></tr></tbody></table><p><strong>error错误类型和值</strong></p><table><thead><tr><th>错误类型</th><th>值 - 说明</th></tr></thead><tbody><tr><td>UPLOAD_ERR_OK</td><td><strong>0</strong> 。没有错误发生，文件上传成功</td></tr><tr><td>UPLOAD_ERR_INI_SIZE</td><td><strong>1</strong> 。上传的文件超过了 php.ini 中 upload_max_filesize选项限制的值</td></tr><tr><td>UPLOAD_ERR_FORM_SIZE</td><td><strong>2</strong> 。上传文件的大小超过了 HTML 表单中 MAX_FILE_SIZE 选项指定的值</td></tr><tr><td>UPLOAD_ERR_PARTIAL</td><td><strong>3</strong> 。文件只有部分被上传</td></tr><tr><td>UPLOAD_ERR_NO_FILE</td><td><strong>4</strong> 。文件没有被上传</td></tr><tr><td>UPLOAD_ERR_NO_TMP_DIR</td><td><strong>6</strong> 。找不到临时文件夹。PHP 4.3.10 和 PHP 5.0.3 引进</td></tr><tr><td>UPLOAD_ERR_CANT_WRITE</td><td><strong>7</strong> 。文件写入失败。PHP 5.1.0 引进</td></tr></tbody></table><h2 id="3、对上传文件进行限制"><a href="#3、对上传文件进行限制" class="headerlink" title="3、对上传文件进行限制"></a>3、对上传文件进行限制</h2><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token comment" spellcheck="true">//设置允许用户上传的文件类型</span><span class="token variable">$allowExts</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string">'jpg'</span><span class="token punctuation">,</span><span class="token string">'jpeg'</span><span class="token punctuation">,</span><span class="token string">'gif'</span><span class="token punctuation">,</span><span class="token string">'png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用explode()语法将文件名分成两段</span><span class="token variable">$fenge</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//取出文件名后缀</span><span class="token variable">$exts</span> <span class="token operator">=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token variable">$fenge</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//如果文件后缀名在允许数组内，就允许上传</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$exts</span><span class="token punctuation">,</span><span class="token variable">$allowExts</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//若上传成功，打印文件信息，若上传失败，则抛出错误信息</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br> '</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token string">'文件名:'</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br>'</span> <span class="token punctuation">.</span>         <span class="token string">'文件类型：'</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br>'</span> <span class="token punctuation">.</span>         <span class="token string">"文件临时存储的名字: "</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"tmp_name"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br>'</span> <span class="token punctuation">.</span>         <span class="token string">'文件大小：'</span> <span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"size"</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token string">'kbyte&lt;br>'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//如果文件后缀名不符合规定，则给出提示</span>    <span class="token keyword">echo</span>  <span class="token string">"错误的文件格式"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4、对上传的文件进行保存"><a href="#4、对上传的文件进行保存" class="headerlink" title="4、对上传的文件进行保存"></a>4、对上传的文件进行保存</h2><blockquote><p><strong>注意：</strong>文件被上传结束后，默认地被存储在了临时目录中，这时您必须将它从临时目录中删除或移动到其它地方，如果没有，不管是否上传成功，脚本执行完后临时目录里的文件肯定会被删除。所以在删除之前要用PHP的 <code>copy()</code> 或者 <code>move_uploaded_file()</code>将它复制或移动到其它位置，此时，才算完成了上传文件过程。</p></blockquote><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token comment" spellcheck="true">//设置允许用户上传的文件类型</span><span class="token variable">$allowExts</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string">'jpg'</span><span class="token punctuation">,</span><span class="token string">'jpeg'</span><span class="token punctuation">,</span><span class="token string">'gif'</span><span class="token punctuation">,</span><span class="token string">'png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用explode()语法将文件名分成两段</span><span class="token variable">$fenge</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//取出文件名后缀</span><span class="token variable">$exts</span> <span class="token operator">=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token variable">$fenge</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//如果文件后缀名在允许数组内，就允许上传</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$exts</span><span class="token punctuation">,</span><span class="token variable">$allowExts</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//若上传成功，打印文件信息，若上传失败，则抛出错误信息</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br> '</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//上传成功，执行</span>    <span class="token keyword">echo</span> <span class="token string">'文件名:'</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br>'</span> <span class="token punctuation">.</span>         <span class="token string">'文件类型：'</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br>'</span> <span class="token punctuation">.</span>         <span class="token string">"文件临时存储的名字: "</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"tmp_name"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'&lt;br>'</span> <span class="token punctuation">.</span>         <span class="token string">'文件大小：'</span> <span class="token punctuation">.</span> <span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"size"</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token string">'kbyte&lt;br>'</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//检查文件是否存在</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token string">"cunchu/"</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">echo</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">'文件已存在&lt;br>'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//若不存在，则将临时文件移动到存储位置</span>        <span class="token function">move_uploaded_file</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"tmp_name"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'cunchu/'</span> <span class="token punctuation">.</span> <span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string">"file"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//如果文件后缀名不符合规定，则给出提示</span>    <span class="token keyword">echo</span>  <span class="token string">"错误的文件格式"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>用法：<code>move_uploaded_file(file,newloc)</code><br>若移动成功，返回true，否则返回false<br> <strong>参数说明：</strong></p><ul><li><code>file</code> 需要移动的文件</li><li><code>newloc</code> 文件的新位置</li></ul></blockquote><p><strong>到此，文件才算上传完成。允许用户上传文件是一个巨大的安全风险。请仅仅允许可信的用户执行文件上传操作并对上传文件进行严格校验。</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> PHP学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> $_FILES </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>$_FILES(一)文件的基本操作</title>
      <link href="/php-xue-xi/files-yi-wen-jian-de-ji-ben-cao-zuo/"/>
      <url>/php-xue-xi/files-yi-wen-jian-de-ji-ben-cao-zuo/</url>
      
        <content type="html"><![CDATA[<blockquote><p>文档回顾：PHP 中预定义了几个超级全局变量（superglobals） ，PHP 4.1.0 之后被启用，这意味着它们在一个脚本的全部作用域中都可用。你不需要特别说明，就可以在函数及类中使用。</p></blockquote><h2 id="1、fopen-函数：在-PHP-中-打开文件"><a href="#1、fopen-函数：在-PHP-中-打开文件" class="headerlink" title="1、fopen()函数：在 PHP 中 打开文件"></a>1、fopen()函数：在 PHP 中 打开文件</h2><blockquote><p>使用方法：<code>fopen(参数1,参数2)</code></p></blockquote><p><strong>参数说明：</strong><br>| 参数 1| 参数 2 |<br>| —- | —- |<br>| 要打开的文件的名称 &nbsp;&nbsp;例如：readme.txt | 规定打开文件使用模式 |</p><p><strong>打开文件可使用的模式表</strong><br>|模式|描述|<br>| —| —|<br>|r|<strong>只读。</strong> 在文件开头开始|<br>|r+|<strong>读/写。</strong>在文件的开头开始|<br>|w|<strong>只写。</strong>打开并清空文件的内容；如果文件不存在，则创建新文件|<br>|w+|<strong>读/写。</strong>打开并清空文件的内容；如果文件不存在，则创建新文件|<br>|a|<strong>追加。</strong>打开并向文件末尾进行写操作，如果文件不存在，则创建新文件|<br>|a+|<strong>读/追加。</strong>通过向文件末尾写内容，来保持文件内容|<br>|x|<strong>只写。</strong>创建新文件。如果文件已存在，则返回 FALSE 和一个错误|<br>|x+|<strong>读/写。</strong>创建新文件。如果文件已存在，则返回 FALSE 和一个错误|</p><blockquote><p>特别说明：如果 fopen() 函数无法打开指定文件，则返回 0 (false)。<br>因此可以使用<code>exit()</code>和<code>fopen()</code>一起使用，用于返回错误信息。</p></blockquote><p><strong>实例</strong></p><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>   <span class="token variable">$file</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"readme.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token string">"打开文件失败!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2、fclose-函数：关闭文件"><a href="#2、fclose-函数：关闭文件" class="headerlink" title="2、fclose()函数：关闭文件"></a>2、fclose()函数：关闭文件</h2><blockquote><p>使用方法：<code>fclose($file)</code></p></blockquote><p><strong>实例</strong></p><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>   <span class="token variable">$file</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"readme.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token string">"打开文件失败!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// 执行代码</span>   <span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3、feof-函数：检查文件末尾（EOF）"><a href="#3、feof-函数：检查文件末尾（EOF）" class="headerlink" title="3、feof()函数：检查文件末尾（EOF）"></a>3、feof()函数：检查文件末尾（EOF）</h2><blockquote><p>使用方法：<code>feof($file)</code> &gt;<strong>特别注意：在 w 、a 和 x 模式下，您无法读取打开的文件！</strong></p></blockquote><p><strong>实例</strong></p><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">echo</span> <span class="token string">"这里是文件结尾"</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token delimiter">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="4、读取文件"><a href="#4、读取文件" class="headerlink" title="4、读取文件"></a>4、读取文件</h2><p><strong>在 PHP 中，读取文件以下方式</strong></p><table><thead><tr><th align="center">方式</th><th align="center">fgets()</th><th align="center">fgetc()</th></tr></thead><tbody><tr><td align="center">描述</td><td align="center">逐行读取文件</td><td align="center">逐字符读取文件</td></tr></tbody></table><blockquote><p>说明：在调用以上任何函数之后，文件指针会移动到下一行。</p></blockquote><p><strong>实例</strong></p><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token variable">$file</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"readme.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token string">"打开文件失败!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">echo</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// echo fgetc($file);</span><span class="token punctuation">}</span><span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> PHP学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
            <tag> $_FILES </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>您好，世界</title>
      <link href="/sui-bi/nin-hao-shi-jie/"/>
      <url>/sui-bi/nin-hao-shi-jie/</url>
      
        <content type="html"><![CDATA[<p>关于建立个人博客的想法已有一段时间了，总是觉得没时间、很忙、下次吧…真正操作起来，其实并没有那么复杂，就是一次又一次的去拖延，这是一个并不好的习惯，但我们都或多或少的有着这样的坏毛病。</p><p>关于博客的框架选择，之前用过<code>wordpress</code>、<code>dedeCMS</code>、<code>ECMS</code>、<code>phpMyWind</code>等，最终还是选择了hexo。主要还是觉得简单易用，作为IT男而言，用<code>markdown</code>来记录自己的成长，那真的是太酷了！</p><p>本博客主要用来记录个人的学习笔记以及遇到的困难和解决方案，方便自己复习，就当是鞭策自己进步的一种方案。如果某一点让大家有了共鸣或是有帮助，那真的是天大的良善！</p><p>有共同学习的朋友，可以加QQ或是微信共同进步，互相打气，互相监督，让技术，为我们引路，开拓视野，拥抱崭新的未来！</p><p>最后：</p><pre><code>hello world! i'm coming~</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开篇 </tag>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
